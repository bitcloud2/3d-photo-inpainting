---

title: mesh


keywords: fastai
sidebar: home_sidebar

summary: "Default description (change me)"
description: "Default description (change me)"
nb_path: "nbs/02_mesh.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_mesh.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_mesh" class="doc_header"><code>create_mesh</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L38" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_mesh</code>(<strong><code>depth</code></strong>, <strong><code>image</code></strong>, <strong><code>int_mtx</code></strong>, <strong><code>config</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="tear_edges" class="doc_header"><code>tear_edges</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L75" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>tear_edges</code>(<strong><code>mesh</code></strong>, <strong><code>threshold</code></strong>=<em><code>0.00025</code></em>, <strong><code>xy2depth</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="calculate_fov" class="doc_header"><code>calculate_fov</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L117" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>calculate_fov</code>(<strong><code>mesh</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="calculate_fov_FB" class="doc_header"><code>calculate_fov_FB</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L126" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>calculate_fov_FB</code>(<strong><code>mesh</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reproject_3d_int_detail" class="doc_header"><code>reproject_3d_int_detail</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L142" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reproject_3d_int_detail</code>(<strong><code>sx</code></strong>, <strong><code>sy</code></strong>, <strong><code>z</code></strong>, <strong><code>k_00</code></strong>, <strong><code>k_02</code></strong>, <strong><code>k_11</code></strong>, <strong><code>k_12</code></strong>, <strong><code>w_offset</code></strong>, <strong><code>h_offset</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reproject_3d_int_detail_FB" class="doc_header"><code>reproject_3d_int_detail_FB</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L147" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reproject_3d_int_detail_FB</code>(<strong><code>sx</code></strong>, <strong><code>sy</code></strong>, <strong><code>z</code></strong>, <strong><code>w_offset</code></strong>, <strong><code>h_offset</code></strong>, <strong><code>mesh</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reproject_3d_int" class="doc_header"><code>reproject_3d_int</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L161" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reproject_3d_int</code>(<strong><code>sx</code></strong>, <strong><code>sy</code></strong>, <strong><code>z</code></strong>, <strong><code>mesh</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_init_node" class="doc_header"><code>generate_init_node</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L173" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_init_node</code>(<strong><code>mesh</code></strong>, <strong><code>config</code></strong>, <strong><code>min_node_in_cc</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_neighbors" class="doc_header"><code>get_neighbors</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L208" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_neighbors</code>(<strong><code>mesh</code></strong>, <strong><code>node</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_face" class="doc_header"><code>generate_face</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L212" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_face</code>(<strong><code>mesh</code></strong>, <strong><code>info_on_pix</code></strong>, <strong><code>config</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="reassign_floating_island" class="doc_header"><code>reassign_floating_island</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L256" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>reassign_floating_island</code>(<strong><code>mesh</code></strong>, <strong><code>info_on_pix</code></strong>, <strong><code>image</code></strong>, <strong><code>depth</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_node_feat" class="doc_header"><code>remove_node_feat</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L341" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_node_feat</code>(<strong><code>mesh</code></strong>, <strong>*<code>feats</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="update_status" class="doc_header"><code>update_status</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L350" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>update_status</code>(<strong><code>mesh</code></strong>, <strong><code>info_on_pix</code></strong>, <strong><code>depth</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>(2) clear_node_feat(G, *fts) : Clear all the node feature on graph G.
(6) get_cross_nes(x, y) : Get the four cross neighbors of pixel(x, y).</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="group_edges" class="doc_header"><code>group_edges</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L400" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>group_edges</code>(<strong><code>LDI</code></strong>, <strong><code>config</code></strong>, <strong><code>image</code></strong>, <strong><code>remove_conflict_ordinal</code></strong>, <strong><code>spdb</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>(1) add_new_node(G, node) : add "node" to graph "G"
(2) add_new_edge(G, node_a, node_b) : add edge "node_a--node_b" to graph "G"
(3) exceed_thre(x, y, thre) : Check if difference between "x" and "y" exceed threshold "thre"
(4) key_exist(d, k) : Check if key "k' exists in dictionary "d"
(5) comm_opp_bg(G, x, y) : Check if node "x" and "y" in graph "G" treat the same opposite node as background
(6) comm_opp_fg(G, x, y) : Check if node "x" and "y" in graph "G" treat the same opposite node as foreground</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="combine_end_node" class="doc_header"><code>combine_end_node</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L558" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>combine_end_node</code>(<strong><code>mesh</code></strong>, <strong><code>edge_mesh</code></strong>, <strong><code>edge_ccs</code></strong>, <strong><code>depth</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_redundant_edge" class="doc_header"><code>remove_redundant_edge</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L653" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_redundant_edge</code>(<strong><code>mesh</code></strong>, <strong><code>edge_mesh</code></strong>, <strong><code>edge_ccs</code></strong>, <strong><code>info_on_pix</code></strong>, <strong><code>config</code></strong>, <strong><code>redundant_number</code></strong>=<em><code>1000</code></em>, <strong><code>invalid</code></strong>=<em><code>False</code></em>, <strong><code>spdb</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="judge_dangle" class="doc_header"><code>judge_dangle</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L739" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>judge_dangle</code>(<strong><code>mark</code></strong>, <strong><code>mesh</code></strong>, <strong><code>node</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_dangling" class="doc_header"><code>remove_dangling</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L758" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_dangling</code>(<strong><code>mesh</code></strong>, <strong><code>edge_ccs</code></strong>, <strong><code>edge_mesh</code></strong>, <strong><code>info_on_pix</code></strong>, <strong><code>image</code></strong>, <strong><code>depth</code></strong>, <strong><code>config</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="context_and_holes" class="doc_header"><code>context_and_holes</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L930" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>context_and_holes</code>(<strong><code>mesh</code></strong>, <strong><code>edge_ccs</code></strong>, <strong><code>config</code></strong>, <strong><code>specific_edge_id</code></strong>, <strong><code>specific_edge_loc</code></strong>, <strong><code>depth_feat_model</code></strong>, <strong><code>connect_points_ccs</code></strong>=<em><code>None</code></em>, <strong><code>inpaint_iter</code></strong>=<em><code>0</code></em>, <strong><code>filter_edge</code></strong>=<em><code>False</code></em>, <strong><code>vis_edge_id</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="DL_inpaint_edge" class="doc_header"><code>DL_inpaint_edge</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L1414" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>DL_inpaint_edge</code>(<strong><code>mesh</code></strong>, <strong><code>info_on_pix</code></strong>, <strong><code>config</code></strong>, <strong><code>image</code></strong>, <strong><code>depth</code></strong>, <strong><code>context_ccs</code></strong>, <strong><code>erode_context_ccs</code></strong>, <strong><code>extend_context_ccs</code></strong>, <strong><code>extend_erode_context_ccs</code></strong>, <strong><code>mask_ccs</code></strong>, <strong><code>broken_mask_ccs</code></strong>, <strong><code>edge_ccs</code></strong>, <strong><code>extend_edge_ccs</code></strong>, <strong><code>init_mask_connect</code></strong>, <strong><code>edge_maps</code></strong>, <strong><code>rgb_model</code></strong>=<em><code>None</code></em>, <strong><code>depth_edge_model</code></strong>=<em><code>None</code></em>, <strong><code>depth_edge_model_init</code></strong>=<em><code>None</code></em>, <strong><code>depth_feat_model</code></strong>=<em><code>None</code></em>, <strong><code>specific_edge_id</code></strong>=<em><code>-1</code></em>, <strong><code>specific_edge_loc</code></strong>=<em><code>None</code></em>, <strong><code>inpaint_iter</code></strong>=<em><code>0</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="write_ply" class="doc_header"><code>write_ply</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L1847" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>write_ply</code>(<strong><code>image</code></strong>, <strong><code>depth</code></strong>, <strong><code>int_mtx</code></strong>, <strong><code>ply_name</code></strong>, <strong><code>config</code></strong>, <strong><code>rgb_model</code></strong>, <strong><code>depth_edge_model</code></strong>, <strong><code>depth_edge_model_init</code></strong>, <strong><code>depth_feat_model</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_ply" class="doc_header"><code>read_ply</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L2097" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_ply</code>(<strong><code>mesh_fi</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Canvas_view" class="doc_header"><code>class</code> <code>Canvas_view</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L2151" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Canvas_view</code>(<strong><code>fov</code></strong>, <strong><code>verts</code></strong>, <strong><code>faces</code></strong>, <strong><code>colors</code></strong>, <strong><code>canvas_size</code></strong>, <strong><code>factor</code></strong>=<em><code>1</code></em>, <strong><code>bgcolor</code></strong>=<em><code>'gray'</code></em>, <strong><code>proj</code></strong>=<em><code>'perspective'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="output_3d_photo" class="doc_header"><code>output_3d_photo</code><a href="https://github.com/bitcloud2/pomerantz/tree/main/pomerantz/mesh.py#L2195" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>output_3d_photo</code>(<strong><code>verts</code></strong>, <strong><code>colors</code></strong>, <strong><code>faces</code></strong>, <strong><code>Height</code></strong>, <strong><code>Width</code></strong>, <strong><code>hFov</code></strong>, <strong><code>vFov</code></strong>, <strong><code>tgt_poses</code></strong>, <strong><code>video_traj_types</code></strong>, <strong><code>ref_pose</code></strong>, <strong><code>output_dir</code></strong>, <strong><code>ref_image</code></strong>, <strong><code>int_mtx</code></strong>, <strong><code>config</code></strong>, <strong><code>image</code></strong>, <strong><code>videos_poses</code></strong>, <strong><code>video_basename</code></strong>, <strong><code>original_H</code></strong>=<em><code>None</code></em>, <strong><code>original_W</code></strong>=<em><code>None</code></em>, <strong><code>border</code></strong>=<em><code>None</code></em>, <strong><code>depth</code></strong>=<em><code>None</code></em>, <strong><code>normal_canvas</code></strong>=<em><code>None</code></em>, <strong><code>all_canvas</code></strong>=<em><code>None</code></em>, <strong><code>mean_loc_depth</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

